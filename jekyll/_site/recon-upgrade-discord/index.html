<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>Upgrading Your Recon with Discord – Ryan Wise</title> <meta name="description" content="Full time software engineer, with freelance on the side. I do a lot of side projects involving electronics and technologies I find interesting. In addition I have a passion for cars, motorcycles and motorsport, I enjoy working on them and competing in events."> <meta name="keywords" content="Discord, Go, Bug Bounty"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="http://localhost:4000/assets/img/logo.png"> <meta name="twitter:title" content="Upgrading Your Recon with Discord"> <meta name="twitter:description" content="Use Discord webhooks to notify you about automated scans from anywhere"> <meta name="twitter:site" content="@leobeosab"> <meta name="twitter:creator" content="@leobeosab"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Upgrading Your Recon with Discord"> <meta property="og:description" content="Use Discord webhooks to notify you about automated scans from anywhere"> <meta property="og:url" content="http://localhost:4000/recon-upgrade-discord/"> <meta property="og:site_name" content="Ryan Wise"> <meta property="og:image" content="http://localhost:4000/assets/img/logo.png"> <link rel="canonical" href="http://localhost:4000/recon-upgrade-discord/"> <link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Ryan Wise Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css"> <!-- JS --> <script src="http://localhost:4000/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://localhost:4000/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png"> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(http://localhost:4000/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140286077-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-140286077-1'); </script> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="http://localhost:4000/">Home</a></li> <li><a href="http://localhost:4000/about/">About</a></li> <li><a href="http://localhost:4000/projects/">Projects</a></li> <li><a href="http://localhost:4000/posts/">Posts</a></li> </ul> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>Upgrading Your Recon with Discord</h1> <h4>24 Jan 2020</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~3 minutes </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="http://localhost:4000/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h2 id="discord">Discord</h2> <p>It seems like everyone is using Discord for communication, video games, streaming or something these days and they should. It’s free, available on all your devices, has a great api and you can make bots and webhooks with ease!</p> <p>We are going to be looking at the WebHooks feature of Discord today and how we can use them to up our recon game.</p> <h3 id="webhooks">WebHooks</h3> <p>Web hooks are an easy way to get data into a certain channel on Discord it’s easy to integrate with services like Github and TravisCI. You generate a URL on Discord and send a post request to it with a content string and bam new message in the channel of your choosing.</p> <h2 id="recon--webhooks--3">Recon + WebHooks = &lt;3</h2> <p>When it comes to passive recon for bug bounties the best approach is to have a set it and forget it attitude. If we have a script that runs everyday and scans for subdomains on yahoo or another program we don’t want to check it manually everyday. It’s much better to have it tell us if it found anything new. This is easy to do with Discord and best of all free.</p> <p>First thing’s first we need to create a WebHook find out how to do that <a href="https://support.discordapp.com/hc/en-us/articles/228383668-Intro-to-Webhooks">here</a></p> <h3 id="calling-your-webhook">Calling your webhook</h3> <p>Calling a webhook is very simple we can do it from the command line using curl!</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -d '{"content":"Hello, World!"}' -H 'Content-Type: application/json' https://[your webhook url]
</code></pre></div></div> <p><img src="/assets/img/posts/recon-upgrade-discord/example_curl.png" alt="curl example"></p> <h3 id="easier-webhooking">Easier WebHooking</h3> <p>An easier method than using curl every single time we want to send a message in our scripts would be to create a little tool that does the calling for us. I wrote a little go script that will do this and you can find it below or in my <a href="https://github.com/leobeosab/hacks/tree/master/go">hacks repoistory</a></p> <p>Couple of notes: Go is a bit overkill for this but I like Go more than I like bash or python(no hate) and let’s be honest Go scripts are cool</p> <p>This could be simplified and we really don’t need the json marshalling but I think it looks better and is a bit easier to read so ‾\_(ツ)_/‾</p> <h5 id="discordmessagego">discordmessage.go</h5> <div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="s">"bytes"</span><span class="x">
    </span><span class="s">"encoding/json"</span><span class="x">
    </span><span class="s">"io/ioutil"</span><span class="x">
    </span><span class="s">"log"</span><span class="x">
    </span><span class="s">"net/http"</span><span class="x">
    </span><span class="s">"os"</span><span class="x">
    </span><span class="s">"strings"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Message</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">Content</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"content"`</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// Discord Notification WebHook</span><span class="x">
    </span><span class="n">whurl</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"D_NOTIFICATION_WH"</span><span class="p">)</span><span class="x">

    </span><span class="n">c</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">strings</span><span class="o">.</span><span class="n">Join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">Args</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="p">],</span><span class="x"> </span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span><span class="x">
    </span><span class="n">m</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">Message</span><span class="p">{</span><span class="x">
        </span><span class="n">Content</span><span class="o">:</span><span class="x"> </span><span class="n">c</span><span class="p">,</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">j</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">json</span><span class="o">.</span><span class="n">Marshal</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="x">

    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="n">whurl</span><span class="p">,</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">(</span><span class="n">j</span><span class="p">))</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">)</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
    </span><span class="k">defer</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">

    </span><span class="n">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"response Status:"</span><span class="p">,</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Status</span><span class="p">)</span><span class="x">
    </span><span class="n">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"response Headers:"</span><span class="p">,</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Header</span><span class="p">)</span><span class="x">
    </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
    </span><span class="n">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"response Body:"</span><span class="p">,</span><span class="x"> </span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div> <p>Now we can just</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export export </span><span class="nv">D_NOTIFICATION_WH</span><span class="o">=[</span>your webhook url]
go run discordmessage.go <span class="s2">"Hello, World!"</span> 

<span class="c"># Or get fancy and install</span>
go install discordmessage.go
discordmessage <span class="s2">"Hello, World!"</span> <span class="c"># From anywhere as long as your gobin is in your path</span>
</code></pre></div></div> <h3 id="practial-example">Practial Example</h3> <p>Aka very lazy but to the point example because I want to go play Call of Duty Modern Warefare</p> <p>Let’s say we have a script running <code class="highlighter-rouge">knock.py yahoo.com &gt; subs.txt</code> everyday and everyday we check it to see if there is anything new. Well let’s automate this checking with the following.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c"># Check if file exists</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> yahoosubs.csv <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span>mv yahoosubs.csv yahoosubs.csv.old
<span class="k">fi</span>

<span class="c"># Run knock py output csv file</span>
knockpy <span class="nt">-w</span> wordlist yahoo.com <span class="nt">-c</span>
<span class="c"># Rename knockpy's csv output because I don't know of a flag to set the file name</span>
mv yahoo_com<span class="k">*</span> yahoosubs.csv

<span class="c"># If a old csv file exists run a diff on it</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> yahoosubs.csv.old <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nv">data</span><span class="o">=</span><span class="sb">`</span>diff yahoosubs.csv yahoosubs.csv.old<span class="sb">`</span>
    discordmessage <span class="s2">"</span><span class="nv">$data</span><span class="s2">"</span>
<span class="k">fi</span>
</code></pre></div></div> <p>Now if we run that script with our wordlist that just has mail, code, dev in it we will get results for those subdomains. To fudge our script finding new domains we are going to add finance to our wordlist. Which if all goes well should lead to this message in our Discord channel <img src="/assets/img/posts/recon-upgrade-discord/practicalexample.png" alt="practical example"></p> <p>Now this is a super simple example and so much more can be done for formatting and different kinds of scans. Follow my <a href="https://github.com/leobeosab">github</a> and <a href="https://twitter.com/ride_faster">twitter</a></p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://localhost:4000/tags/#Discord" title="Pages tagged Discord" class="tag"><span class="term">Discord</span></a><a href="http://localhost:4000/tags/#Go" title="Pages tagged Go" class="tag"><span class="term">Go</span></a><a href="http://localhost:4000/tags/#Bug%20Bounty" title="Pages tagged Bug Bounty" class="tag"><span class="term">Bug Bounty</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/recon-upgrade-discord/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/recon-upgrade-discord/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=http://localhost:4000/recon-upgrade-discord/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header> <!-- JS --> <script src="http://localhost:4000/assets/js/jquery-1.12.0.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.dlmenu.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.fitvid.min.js"></script> <script src="http://localhost:4000/assets/js/scripts.js"></script> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
